@page "/CreatePoll"
@using Data.Polls
@using Models.Polls

@inject IPollRepository PollRepository
@inject NavigationManager NavigationManager

<div class="form-group">
    <label for="name">Name:</label>
    <input type="text" class="form-control" @bind-value="NewPoll.Name" />
</div>
<div class="form-group">
    <label for="source">Source:</label>
    <input type="text" class="form-control" @bind-value="NewPoll.CreatorLogin" />
</div>
@*<div class="form-group">
        <label for="coolfactor">Cool Factor:</label>

        <InputSelect Class="form-control" id="coolfactor" @bind-Value="NewPoll.CoolFactor">
            @foreach (var f in Enum.GetValues(typeof(CoolFactor)))
            {
                <option value="@f">@f.ToString()</option>
            }
        </InputSelect>
    </div>*@
<button class="btn btn-primary" @onclick="ValidSubmit">Save Changes</button>
<button class="btn btn-secondary" @onclick="Cancel">Cancel</button>


@code {
    public Poll NewPoll { get; set; }

    protected override void OnInitialized()
    {
        NewPoll = new Poll();
    }
    void BackToList()
    {
        NavigationManager.NavigateTo("/");
    }

    void Cancel()
    {
        BackToList();
    }

    void ValidSubmit()
    {
        //DataLayer.SubmitChanges(Trophy);
        PollRepository.Add(NewPoll);
        BackToList();
    }
}
